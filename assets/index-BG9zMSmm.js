import{d as C,u as y,r as s,o as z,c as A,a,w as u,b as o,e as N,f as c,g as S,t as T,h as U}from"./index-DnZsPIdY.js";import{i as Z,a as p}from"./nighttime-DdRxDGUb.js";const I=C({__name:"index",setup($){const _=y(),l=s(""),d=s(""),n=s(!1),m=s(""),i=s(!1),f=()=>{var r=/^([a-zA-Z]|[0-9])(\w|\-)+@[a-zA-Z0-9]+\.([a-zA-Z]{2,4})$/;r.test(l.value)?p.post("/auth/get_code",{email:l.value}).then(e=>{m.value=e.data.message,n.value=!0}):(m.value="Invalid email address!",n.value=!0)},g=()=>{i.value=!0,p.post("/auth/check_login",{email:l.value,code:d.value}).then(r=>{let e=r.data,v=e.token;m.value=e.message,n.value=!0,setTimeout(()=>{i.value=!1,e.status==200&&(localStorage.setItem("token",v),U.push("/panel"))},2e3)})};return z(()=>{Z()&&(_.global.name.value="dark")}),(r,e)=>{const v=o("v-btn"),k=o("center"),x=o("v-text-field"),V=o("v-otp-input"),h=o("v-form"),b=o("v-card"),w=o("v-snackbar");return N(),A("div",null,[a(b,{class:"mx-auto my-10",hover:"","max-width":" 344"},{default:u(()=>[a(k,{class:"mt-4"},{default:u(()=>[a(v,{onClick:e[0]||(e[0]=t=>f()),variant:"plain"},{default:u(()=>[c(" hackhack ")]),_:1})]),_:1}),a(h,{"fast-fail":"",onSubmit:e[4]||(e[4]=S(()=>{},["prevent"])),class:"m-4"},{default:u(()=>[a(x,{modelValue:l.value,"onUpdate:modelValue":e[1]||(e[1]=t=>l.value=t),type:"email",placeholder:"user@example.com",label:"Email",class:"mt-2",variant:"outlined"},null,8,["modelValue"]),a(V,{modelValue:d.value,"onUpdate:modelValue":e[2]||(e[2]=t=>d.value=t),length:"5",onFinish:e[3]||(e[3]=t=>g()),loading:i.value,variant:"underlined"},null,8,["modelValue","loading"])]),_:1})]),_:1}),a(w,{modelValue:n.value,"onUpdate:modelValue":e[5]||(e[5]=t=>n.value=t),timeout:2e3},{default:u(()=>[c(T(m.value),1)]),_:1},8,["modelValue"])])}}});export{I as default};

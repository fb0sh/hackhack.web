import{d as y,u as S,r as u,o as z,a as c,c as A,b as a,w as m,e as o,f as I,g as p,h as N,t as T}from"./index-C93vmx7p.js";import{i as U,a as _}from"./nighttime-DdRxDGUb.js";const E=y({__name:"index",setup(Z){const f=S(),l=u(""),i=u(""),n=u(!1),r=u(""),d=u(!1),g=()=>{var s=/^([a-zA-Z]|[0-9])(\w|\-)+@[a-zA-Z0-9]+\.([a-zA-Z]{2,4})$/;s.test(l.value)?_.post("/auth/get_code",{email:l.value}).then(e=>{r.value=e.data.message,n.value=!0}):(r.value="Invalid email address!",n.value=!0)},k=()=>{d.value=!0,_.post("/auth/check_login",{email:l.value,code:i.value}).then(s=>{let e=s.data,v=e.token;r.value=e.message,n.value=!0,setTimeout(()=>{d.value=!1,e.status==200&&(localStorage.setItem("token",v),c.push("/panel"))},2e3)})};return z(()=>{U()&&(f.global.name.value="dark"),localStorage.getItem("token")&&c.push("/panel")}),(s,e)=>{const v=o("v-btn"),x=o("center"),V=o("v-text-field"),h=o("v-otp-input"),b=o("v-form"),w=o("v-card"),C=o("v-snackbar");return I(),A("div",null,[a(w,{class:"mx-auto my-10",hover:"","max-width":" 344"},{default:m(()=>[a(x,{class:"mt-4"},{default:m(()=>[a(v,{onClick:e[0]||(e[0]=t=>g()),variant:"plain"},{default:m(()=>[p(" hackhack ")]),_:1})]),_:1}),a(b,{"fast-fail":"",onSubmit:e[4]||(e[4]=N(()=>{},["prevent"])),class:"m-4"},{default:m(()=>[a(V,{modelValue:l.value,"onUpdate:modelValue":e[1]||(e[1]=t=>l.value=t),type:"email",placeholder:"user@example.com",label:"Email",class:"mt-2",variant:"outlined"},null,8,["modelValue"]),a(h,{modelValue:i.value,"onUpdate:modelValue":e[2]||(e[2]=t=>i.value=t),length:"5",onFinish:e[3]||(e[3]=t=>k()),loading:d.value,variant:"underlined"},null,8,["modelValue","loading"])]),_:1})]),_:1}),a(C,{modelValue:n.value,"onUpdate:modelValue":e[5]||(e[5]=t=>n.value=t),timeout:2e3},{default:m(()=>[p(T(r.value),1)]),_:1},8,["modelValue"])])}}});export{E as default};
